{"id":"80279109-8692-4c7e-bc67-dc8c20f15214","revision":0,"last_node_id":92,"last_link_id":169,"nodes":[{"id":1,"type":"UnetLoaderGGUF","pos":[2330,-270],"size":[270,70],"flags":{"pinned":true},"order":0,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[47]}],"properties":{"cnr_id":"comfyui-gguf","ver":"3d673c5c098ecaa6e6027f834659ba8de534ca32","Node name for S&R":"UnetLoaderGGUF"},"widgets_values":["Flux\\flux1-dev-Q8_0.gguf"]},{"id":5,"type":"FaceDetailer","pos":[3230,-270],"size":[370,970],"flags":{"pinned":true},"order":24,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":168},{"localized_name":"model","name":"model","type":"MODEL","link":169},{"localized_name":"clip","name":"clip","type":"CLIP","link":151},{"localized_name":"vae","name":"vae","type":"VAE","link":167},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":83},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":92},{"localized_name":"bbox_detector","name":"bbox_detector","type":"BBOX_DETECTOR","link":108},{"localized_name":"sam_model_opt","name":"sam_model_opt","shape":7,"type":"SAM_MODEL","link":166},{"localized_name":"segm_detector_opt","name":"segm_detector_opt","shape":7,"type":"SEGM_DETECTOR","link":null},{"localized_name":"detailer_hook","name":"detailer_hook","shape":7,"type":"DETAILER_HOOK","link":null},{"localized_name":"scheduler_func_opt","name":"scheduler_func_opt","shape":7,"type":"SCHEDULER_FUNC","link":null},{"localized_name":"guide_size","name":"guide_size","type":"FLOAT","widget":{"name":"guide_size"},"link":null},{"localized_name":"guide_size_for","name":"guide_size_for","type":"BOOLEAN","widget":{"name":"guide_size_for"},"link":null},{"localized_name":"max_size","name":"max_size","type":"FLOAT","widget":{"name":"max_size"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"feather","name":"feather","type":"INT","widget":{"name":"feather"},"link":null},{"localized_name":"noise_mask","name":"noise_mask","type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null},{"localized_name":"force_inpaint","name":"force_inpaint","type":"BOOLEAN","widget":{"name":"force_inpaint"},"link":null},{"localized_name":"bbox_threshold","name":"bbox_threshold","type":"FLOAT","widget":{"name":"bbox_threshold"},"link":null},{"localized_name":"bbox_dilation","name":"bbox_dilation","type":"INT","widget":{"name":"bbox_dilation"},"link":null},{"localized_name":"bbox_crop_factor","name":"bbox_crop_factor","type":"FLOAT","widget":{"name":"bbox_crop_factor"},"link":null},{"localized_name":"sam_detection_hint","name":"sam_detection_hint","type":"COMBO","widget":{"name":"sam_detection_hint"},"link":null},{"localized_name":"sam_dilation","name":"sam_dilation","type":"INT","widget":{"name":"sam_dilation"},"link":null},{"localized_name":"sam_threshold","name":"sam_threshold","type":"FLOAT","widget":{"name":"sam_threshold"},"link":null},{"localized_name":"sam_bbox_expansion","name":"sam_bbox_expansion","type":"INT","widget":{"name":"sam_bbox_expansion"},"link":null},{"localized_name":"sam_mask_hint_threshold","name":"sam_mask_hint_threshold","type":"FLOAT","widget":{"name":"sam_mask_hint_threshold"},"link":null},{"localized_name":"sam_mask_hint_use_negative","name":"sam_mask_hint_use_negative","type":"COMBO","widget":{"name":"sam_mask_hint_use_negative"},"link":null},{"localized_name":"drop_size","name":"drop_size","type":"INT","widget":{"name":"drop_size"},"link":null},{"localized_name":"wildcard","name":"wildcard","type":"STRING","widget":{"name":"wildcard"},"link":null},{"localized_name":"cycle","name":"cycle","type":"INT","widget":{"name":"cycle"},"link":null},{"localized_name":"inpaint_model","name":"inpaint_model","shape":7,"type":"BOOLEAN","widget":{"name":"inpaint_model"},"link":null},{"localized_name":"noise_mask_feather","name":"noise_mask_feather","shape":7,"type":"INT","widget":{"name":"noise_mask_feather"},"link":null},{"localized_name":"tiled_encode","name":"tiled_encode","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_encode"},"link":null},{"localized_name":"tiled_decode","name":"tiled_decode","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_decode"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","slot_index":0,"links":[42,43]},{"localized_name":"cropped_refined","name":"cropped_refined","shape":6,"type":"IMAGE","links":null},{"localized_name":"cropped_enhanced_alpha","name":"cropped_enhanced_alpha","shape":6,"type":"IMAGE","slot_index":2,"links":[135]},{"localized_name":"mask","name":"mask","type":"MASK","slot_index":3,"links":[]},{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","links":null},{"localized_name":"cnet_images","name":"cnet_images","shape":6,"type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"38bb9ffdf66386dc3a9d764db83f7460f458bffa","Node name for S&R":"FaceDetailer"},"widgets_values":[512,true,1024,1,"fixed",30,1,"euler","simple",0.5,5,true,true,0.5,10,3,"center-1",0,0.3,0,0.7,"False",10,"",1,false,20,false,false]},{"id":2,"type":"DualCLIPLoaderGGUF","pos":[2330,-110],"size":[270,110],"flags":{"pinned":true},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[48]}],"properties":{"cnr_id":"comfyui-gguf","ver":"3d673c5c098ecaa6e6027f834659ba8de534ca32","Node name for S&R":"DualCLIPLoaderGGUF"},"widgets_values":["clip_l.safetensors","t5-v1_1-xxl-encoder-Q5_K_M.gguf","flux"]},{"id":18,"type":"UltralyticsDetectorProvider","pos":[2930,220],"size":[270,80],"flags":{"pinned":true},"order":2,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null}],"outputs":[{"localized_name":"BBOX_DETECTOR","name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[108]},{"localized_name":"SEGM_DETECTOR","name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","slot_index":1,"links":[]}],"properties":{"cnr_id":"comfyui-impact-subpack","ver":"0e2638b699023b77407606a575c87fa3d46c2e26","Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":74,"type":"Reroute","pos":[3630,310],"size":[75,26],"flags":{"pinned":true},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":135}],"outputs":[{"name":"","type":"IMAGE","links":[136]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":21,"type":"PreviewImage","pos":[4730,-270],"size":[270,370],"flags":{"pinned":true},"order":29,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":137}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":75,"type":"Reroute","pos":[4625,310],"size":[75,26],"flags":{"pinned":true},"order":28,"mode":0,"inputs":[{"name":"","type":"*","link":136}],"outputs":[{"name":"","type":"IMAGE","links":[137]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":29,"type":"Image Comparer (rgthree)","pos":[3630,-270],"size":[470,570],"flags":{"pinned":true},"order":25,"mode":0,"inputs":[{"dir":3,"name":"image_a","type":"IMAGE","link":100},{"dir":3,"name":"image_b","type":"IMAGE","link":42}],"outputs":[],"properties":{"cnr_id":"rgthree-comfy","ver":"5dc53323e07a021038af9f2a4a06ebc071f7218c","comparer_mode":"Slide"},"widgets_values":[[{"name":"A","selected":true,"url":"/api/view?filename=rgthree.compare._temp_ayrrz_00001_.png&type=temp&subfolder=&rand=0.9257382722285059"},{"name":"B","selected":true,"url":"/api/view?filename=rgthree.compare._temp_ayrrz_00002_.png&type=temp&subfolder=&rand=0.8811122489504144"}]]},{"id":32,"type":"SaveImage","pos":[4130,-270],"size":[570,570],"flags":{"pinned":true},"order":26,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":43},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.30"},"widgets_values":["Images/Flux"]},{"id":38,"type":"GetImageSize","pos":[2000,160],"size":[300,140],"flags":{"pinned":true},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":65}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[152]},{"localized_name":"height","name":"height","type":"INT","links":[153]},{"localized_name":"batch_size","name":"batch_size","type":"INT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S&R":"GetImageSize"},"widgets_values":[]},{"id":13,"type":"VAELoader","pos":[2330,230],"size":[270,70],"flags":{"pinned":true},"order":3,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[158]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"VAELoader"},"widgets_values":["Flux\\ae.safetensors"]},{"id":34,"type":"Lora Loader Stack (rgthree)","pos":[2630,-270],"size":[270,270],"flags":{"pinned":true},"order":7,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":47},{"localized_name":"clip","name":"clip","type":"CLIP","link":48},{"localized_name":"lora_01","name":"lora_01","type":"COMBO","widget":{"name":"lora_01"},"link":null},{"localized_name":"strength_01","name":"strength_01","type":"FLOAT","widget":{"name":"strength_01"},"link":null},{"localized_name":"lora_02","name":"lora_02","type":"COMBO","widget":{"name":"lora_02"},"link":null},{"localized_name":"strength_02","name":"strength_02","type":"FLOAT","widget":{"name":"strength_02"},"link":null},{"localized_name":"lora_03","name":"lora_03","type":"COMBO","widget":{"name":"lora_03"},"link":null},{"localized_name":"strength_03","name":"strength_03","type":"FLOAT","widget":{"name":"strength_03"},"link":null},{"localized_name":"lora_04","name":"lora_04","type":"COMBO","widget":{"name":"lora_04"},"link":null},{"localized_name":"strength_04","name":"strength_04","type":"FLOAT","widget":{"name":"strength_04"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[49]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[61,151]}],"properties":{"cnr_id":"rgthree-comfy","ver":"ce6fc334c923a465254a62073fb1677c1cc6a193","Node name for S&R":"Lora Loader Stack (rgthree)"},"widgets_values":["None",1,"None",1,"None",1,"None",1]},{"id":4,"type":"ModelSamplingFlux","pos":[2630,60],"size":[270,240],"flags":{"pinned":true},"order":21,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":49},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":155},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":157}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[159]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"ModelSamplingFlux"},"widgets_values":[1.15,0.5,896,1152]},{"id":36,"type":"ConditioningZeroOut","pos":[2930,60],"size":[270,100],"flags":{"pinned":true},"order":18,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":62}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[92]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S&R":"ConditioningZeroOut"},"widgets_values":[],"color":"#322","bgcolor":"#533"},{"id":19,"type":"SAMLoader","pos":[2330,60],"size":[270,110],"flags":{"pinned":true},"order":4,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"device_mode","name":"device_mode","type":"COMBO","widget":{"name":"device_mode"},"link":null}],"outputs":[{"localized_name":"SAM_MODEL","name":"SAM_MODEL","type":"SAM_MODEL","links":[160]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"38bb9ffdf66386dc3a9d764db83f7460f458bffa","Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"]},{"id":15,"type":"LoadImage","pos":[2000,-270],"size":[300,370],"flags":{"pinned":true},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[65,100,161]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"LoadImage"},"widgets_values":["example.png","image"]},{"id":77,"type":"Reroute","pos":[2330,310],"size":[75,26],"flags":{"pinned":true},"order":15,"mode":0,"inputs":[{"name":"","type":"*","widget":{"name":"value"},"link":152}],"outputs":[{"name":"","type":"INT","links":[154]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":78,"type":"Reroute","pos":[2330,330],"size":[75,26],"flags":{"pinned":true},"order":16,"mode":0,"inputs":[{"name":"","type":"*","widget":{"name":"value"},"link":153}],"outputs":[{"name":"","type":"INT","links":[156]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":84,"type":"Reroute","pos":[2330,350],"size":[75,26],"flags":{"pinned":true},"order":11,"mode":0,"inputs":[{"name":"","type":"*","link":161}],"outputs":[{"name":"","type":"IMAGE","links":[162]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":82,"type":"Reroute","pos":[2930,370],"size":[75,26],"flags":{"pinned":true},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":159}],"outputs":[{"name":"","type":"MODEL","links":[163]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":83,"type":"Reroute","pos":[2630,310],"size":[75,26],"flags":{"pinned":true},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":160}],"outputs":[{"name":"","type":"SAM_MODEL","links":[164]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":81,"type":"Reroute","pos":[2630,330],"size":[75,26],"flags":{"pinned":true},"order":8,"mode":0,"inputs":[{"name":"","type":"*","link":158}],"outputs":[{"name":"","type":"VAE","links":[165]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":87,"type":"Reroute","pos":[3125,310],"size":[75,26],"flags":{"pinned":true},"order":14,"mode":0,"inputs":[{"name":"","type":"*","link":164}],"outputs":[{"name":"","type":"SAM_MODEL","links":[166]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":88,"type":"Reroute","pos":[3125,330],"size":[75,26],"flags":{"pinned":true},"order":13,"mode":0,"inputs":[{"name":"","type":"*","link":165}],"outputs":[{"name":"","type":"VAE","links":[167]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":85,"type":"Reroute","pos":[3125,350],"size":[75,26],"flags":{"pinned":true},"order":17,"mode":0,"inputs":[{"name":"","type":"*","link":162}],"outputs":[{"name":"","type":"IMAGE","links":[168]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":86,"type":"Reroute","pos":[3125,370],"size":[75,26],"flags":{"pinned":true},"order":23,"mode":0,"inputs":[{"name":"","type":"*","link":163}],"outputs":[{"name":"","type":"MODEL","links":[169]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":79,"type":"Reroute","pos":[2525,310],"size":[75,26],"flags":{"pinned":true},"order":19,"mode":0,"inputs":[{"name":"","type":"*","widget":{"name":"value"},"link":154}],"outputs":[{"name":"","type":"INT","links":[155]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":80,"type":"Reroute","pos":[2525,330],"size":[75,26],"flags":{"pinned":true},"order":20,"mode":0,"inputs":[{"name":"","type":"*","widget":{"name":"value"},"link":156}],"outputs":[{"name":"","type":"INT","links":[157]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":37,"type":"CLIPTextEncodeFlux","pos":[2930,-270],"size":[270,270],"flags":{"pinned":true},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":61},{"localized_name":"clip_l","name":"clip_l","type":"STRING","widget":{"name":"clip_l"},"link":null},{"localized_name":"t5xxl","name":"t5xxl","type":"STRING","widget":{"name":"t5xxl"},"link":null},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[62,83]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.76","Node name for S&R":"CLIPTextEncodeFlux"},"widgets_values":["","",3.5],"color":"#232","bgcolor":"#353"},{"id":92,"type":"Note","pos":[1700,-270],"size":[270,370],"flags":{"pinned":true},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"Models in this Workflow","properties":{},"widgets_values":["flux1-dev-Q8_0:\nhttps://huggingface.co/city96/FLUX.1-dev-gguf/tree/main\n\nclip_l:\nhttps://huggingface.co/comfyanonymous/flux_text_encoders/tree/main\n\nt5-v1_1-xxl-encoder-Q5_K_M:\nhttps://huggingface.co/city96/t5-v1_1-xxl-encoder-gguf/tree/main\n\nae:\nhttps://huggingface.co/black-forest-labs/FLUX.1-dev/tree/main/vae"],"color":"#2a363b","bgcolor":"#3f5159"}],"links":[[42,5,0,29,1,"IMAGE"],[43,5,0,32,0,"IMAGE"],[47,1,0,34,0,"MODEL"],[48,2,0,34,1,"CLIP"],[49,34,0,4,0,"MODEL"],[61,34,1,37,0,"CLIP"],[62,37,0,36,0,"CONDITIONING"],[65,15,0,38,0,"IMAGE"],[83,37,0,5,4,"CONDITIONING"],[92,36,0,5,5,"CONDITIONING"],[100,15,0,29,0,"IMAGE"],[108,18,0,5,6,"BBOX_DETECTOR"],[135,5,2,74,0,"*"],[136,74,0,75,0,"*"],[137,75,0,21,0,"IMAGE"],[151,34,1,5,2,"CLIP"],[152,38,0,77,0,"INT"],[153,38,1,78,0,"INT"],[154,77,0,79,0,"INT"],[155,79,0,4,3,"INT"],[156,78,0,80,0,"INT"],[157,80,0,4,4,"INT"],[158,13,0,81,0,"VAE"],[159,4,0,82,0,"MODEL"],[160,19,0,83,0,"SAM_MODEL"],[161,15,0,84,0,"IMAGE"],[162,84,0,85,0,"IMAGE"],[163,82,0,86,0,"MODEL"],[164,83,0,87,0,"SAM_MODEL"],[165,81,0,88,0,"VAE"],[166,87,0,5,7,"SAM_MODEL"],[167,88,0,5,3,"VAE"],[168,85,0,5,0,"IMAGE"],[169,86,0,5,1,"MODEL"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.42289156626506014,"offset":[-1136.6666666666665,880.6552706552707]},"node_versions":{"ComfyUI-GGUF":"5875c52f59baca3a9372d68c43a3775e21846fe0","comfy-core":"0.3.14","comfyui-impact-subpack":"74db20c95eca152a6d686c914edc0ef4e4762cb8","comfyui-impact-pack":"c6056b132d7e155c3ece42b77e08ea45bde1bfef","rgthree-comfy":"5d771b8b56a343c24a26e8cea1f0c87c3d58102f"}},"version":0.4}